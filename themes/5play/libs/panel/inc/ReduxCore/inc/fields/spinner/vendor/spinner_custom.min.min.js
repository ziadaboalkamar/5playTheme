jQuery.uaMatch=function(c){c=c.toLowerCase();var d=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[];return{browser:d[1]||"",version:d[2]||"0"}};(function(a,b){var d="ui-state-active",f="ui-state-hover",h="ui-state-disabled",j=a.ui.keyCode,m=j.UP,o=j.DOWN,p=j.RIGHT,q=j.LEFT,r=j.PAGE_UP,s=j.PAGE_DOWN,c=j.HOME,e=j.END,g=a.uaMatch.msie,i=a.uaMatch.mozilla?"DOMMouseScroll":"mousewheel",k=".uispinner",l=[m,o,p,q,r,s,c,e,j.BACKSPACE,j.DELETE,j.TAB],n;a.widget("ui.spinner",{options:{min:null,max:null,allowNull:false,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:true,increment:"slow",className:null,showOn:"always",width:95,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",format:function(w,x){var t=this,u=/(\d+)(\d{3})/,v=(isNaN(w)?0:Math.abs(w)).toFixed(x)+"";for(v=v.replace(".",t.point);u.test(v)&&t.group;v=v.replace(u,"$1"+t.group+"$2")){}return(w<0?"-":"")+t.prefix+v+t.suffix},parse:function(t){var u=this;if(u.group=="."){t=t.replace(".","")}if(u.point!="."){t=t.replace(u.point,".")}return parseFloat(t.replace(/[^0-9\-\.]/g,""))}},_create:function(){var u=this,v=u.element,t=v.attr("type");if(!v.is("input")||t!="text"&&t!="number"){console.error("Invalid target for ui.spinner");return}u._procOptions(true);u._createButtons(v);if(!v.is(":enabled")){u.disable()}},_createButtons:function(N){function Q(){if(I){a(this).removeClass(d);R._stopSpin();I=false}return false}function O(){if(!v.disabled){var U=R.element[0],T=this===t?1:-1;U.focus();U.select();a(this).addClass(d);I=true;R._startSpin(T)}return false}function M(U){function T(){A=0;U()}if(A){if(U===C){return}clearTimeout(A)}C=U;A=setTimeout(T,100)}function L(U,T){if(H){return false}var V=String.fromCharCode(T||U),W=R.options;if(V>="0"&&V<="9"||V=="-"){return false}if(R.places>0&&V==W.point||V==W.group){return false}return true}function K(U){for(var T=0;T<l.length;T++){if(l[T]==U){return true}}return false}function P(T){return T=="auto"?0:parseInt(T)}var R=this,v=R.options,x=v.className,z=v.width,B=v.showOn,E=N.outerHeight(),G=R.oMargin=P(N.css("margin-right")),ac=R.wrapper=N.wrap('<span class="spinner-wrpr" />').css({width:(R.oWidth=N.outerWidth())-z,marginRight:"30px",marginLeft:"30px",textAlign:"center","float":"none",marginTop:0}).after('<span class="ui-spinner ui-widget"></span>').next(),ad=R.btnContainer=a('<div class="ui-spinner-buttons"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+v.upIconClass+'"> </span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+v.downIconClass+'"> </span></div></div>'),t,u,w,y,A,C,D,F,H,I,J=N[0].dir=="rtl";if(x){ac.addClass(x)}ac.append(ad.css({height:E,left:0,top:0}));w=R.buttons=ad.find(".ui-spinner-button");w.css({width:"30px",height:E-(0)});w.eq(0).css({right:"0"});w.eq(1).css({left:"0"});t=w[0];u=w[1];y=w.find(".ui-icon");ad.width("105px");if(B!="always"){ad.css("opacity",0)}if(B=="hover"||B=="both"){w.add(N).bind("mouseenter"+k,function(){M(function(){D=true;if(!R.focused||B=="hover"){R.showButtons()}})}).bind("mouseleave"+k,function S(){M(function(){D=false;if(!R.focused||B=="hover"){R.hideButtons()}})})}w.hover(function(){R.buttons.removeClass(f);if(!v.disabled){a(this).addClass(f)}},function(){a(this).removeClass(f)}).mousedown(O).mouseup(Q).mouseout(Q);if(g){w.dblclick(function(){if(!v.disabled){R._change();R._doSpin((this===t?1:-1)*v.step)}return false}).bind("selectstart",function(){return false})}N.bind("keydown"+k,function(V){var T,W,X,U=V.keyCode;if(V.ctrl||V.alt){return true}if(K(U)){H=true}if(F){return false}switch(U){case m:case r:T=1;W=U==r;break;case o:case s:T=-1;W=U==s;break;case p:case q:T=U==p^J?1:-1;break;case c:X=R.options.min;if(X!=null){R._setValue(X)}return false;case e:X=R.options.max;X=R.options.max;if(X!=null){R._setValue(X)}return false}if(T){if(!F&&!v.disabled){keyDir=T;a(T>0?t:u).addClass(d);F=true;R._startSpin(T,W)}return false}}).bind("keyup"+k,function(T){if(T.ctrl||T.alt){return true}if(K(j)){H=false}switch(T.keyCode){case m:case p:case r:case o:case q:case s:w.removeClass(d);R._stopSpin();F=false;return false}}).bind("keypress"+k,function(T){if(L(T.keyCode,T.charCode)){return false}}).bind("change"+k,function(){R._change()}).bind("focus"+k,function(){function T(){R.element.select()}g?T():setTimeout(T,0);R.focused=true;n=R;if(!D&&(B=="focus"||B=="both")){R.showButtons()}}).bind("blur"+k,function(){R.focused=false;if(!D&&(B=="focus"||B=="both")){R.hideButtons()}})},_procOptions:function(B){var C=this,t=C.element,u=C.options,v=u.min,w=u.max,x=u.step,y=u.places,z=-1,A;if(u.increment=="slow"){u.increment=[{count:1,mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]}else{if(u.increment=="fast"){u.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]}}if(v==null&&(A=t.attr("min"))!=null){v=parseFloat(A)}if(w==null&&(A=t.attr("max"))!=null){w=parseFloat(A)}if(!x&&(A=t.attr("step"))!=null){if(A!="any"){x=parseFloat(A);u.largeStep*=x}}u.step=x=x||u.defaultStep;if(y==null&&(A=x+"").indexOf(".")!=-1){y=A.length-A.indexOf(".")-1}C.places=y;if(w!=null&&v!=null){if(v>w){v=w}z=Math.max(Math.max(z,u.format(w,y,t).length),u.format(v,y,t).length)}if(B){C.inputMaxLength=t[0].maxLength}A=C.inputMaxLength;if(A>0){z=z>0?Math.min(A,z):A;A=Math.pow(10,z)-1;if(w==null||w>A){w=A}A=-(A+1)/10+1;if(v==null||v<A){v=A}}if(z>0){t.attr("maxlength",z)}u.min=v;u.max=w;C._change();t.unbind(i+k);if(u.mouseWheel){t.bind(i+k,C._mouseWheel)}},_mouseWheel:function(t){var u=a.data(this,"spinner");if(!u.options.disabled&&u.focused&&n===u){u._change();u._doSpin(((t.wheelDelta||-t.detail)>0?1:-1)*u.options.step);return false}},_setTimer:function(w,x,t){function v(){u._spin(x,t)}var u=this;u._stopSpin();u.timer=setInterval(v,w)},_stopSpin:function(){if(this.timer){clearInterval(this.timer);this.timer=0}},_startSpin:function(w,x){var t=this,u=t.options,v=u.increment;t._change();t._doSpin(w*(x?t.options.largeStep:t.options.step));if(v&&v.length>0){t.counter=0;t.incCounter=0;t._setTimer(v[0].delay,w,x)}},_spin:function(w,x){var t=this,u=t.options.increment,v=u[t.incCounter];t._doSpin(w*v.mult*(x?t.options.largeStep:t.options.step));t.counter++;if(t.counter>v.count&&t.incCounter<u.length-1){t.counter=0;v=u[++t.incCounter];t._setTimer(v.delay,w,x)}},_doSpin:function(u){var v=this,t=v.curvalue;if(t==null){t=(u>0?v.options.min:v.options.max)||0}v._setValue(t+u)},_parseValue:function(){var t=this.element.val();return t?this.options.parse(t,this.element):null},_validate:function(v){var w=this.options,t=w.min,u=w.max;if(v==null&&!w.allowNull){v=this.curvalue!=null?this.curvalue:t||u||0}if(u!=null&&v>u){return u}else{if(t!=null&&v<t){return t}else{return v}}},_change:function(){var v=this,w=v._parseValue(),t=v.options.min,u=v.options.max;if(!v.selfChange){if(isNaN(w)){w=v.curvalue}v._setValue(w,true)}},_setOption:function(t,u){a.Widget.prototype._setOption.call(this,t,u);this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},showButtons:function(t){var u=this.btnContainer.stop();if(t){u.css("opacity",1)}else{u.fadeTo("fast",1)}},hideButtons:function(t){var u=this.btnContainer.stop();if(t){u.css("opacity",0)}else{u.fadeTo("fast",0)}this.buttons.removeClass(f)},_setValue:function(u,v){var t=this;t.curvalue=u=t._validate(u);t.element.val(u!=null?t.options.format(u,t.places,t.element):"");if(!v){t.selfChange=true;t.element.change();t.selfChange=false}},value:function(t){if(arguments.length){this._setValue(t);return this.element}return this.curvalue},enable:function(){this.buttons.removeClass(h);this.element[0].disabled=false;a.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass(h).removeClass(f);this.element[0].disabled=true;a.Widget.prototype.disable.call(this)},destroy:function(t){this.wrapper.remove();this.element.unbind(k).css({width:this.oWidth,marginRight:this.oMargin});a.Widget.prototype.destroy.call(this)}})})(jQuery);