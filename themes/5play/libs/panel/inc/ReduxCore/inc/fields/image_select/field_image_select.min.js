(function(a){redux.field_objects=redux.field_objects||{};redux.field_objects.image_select=redux.field_objects.image_select||{};a(document).ready(function(){});redux.field_objects.image_select.init=function(b){if(!b){b=a(document).find(".redux-group-tab:visible").find(".redux-container-image_select:visible")}a(b).each(function(){var d=a(this);var c=d;if(!d.hasClass("redux-field-container")){c=d.parents(".redux-field-container:first")}if(c.is(":hidden")){return}if(c.hasClass("redux-field-init")){c.removeClass("redux-field-init")}else{return}d.find(".redux-image-select label img, .redux-image-select label .tiles").click(function(i){var k=a(this).closest("label").attr("for");a(this).parents("fieldset:first").find(".redux-image-select-selected").removeClass("redux-image-select-selected").find("input[type='radio']").attr("checked",false);a(this).closest("label").find('input[type="radio"]').prop("checked");if(a(this).closest("label").hasClass("redux-image-select-preset-"+k)){i.preventDefault();var f=a(this).closest("label").find("input");var h=f.data("presets");var j=f.data("merge");if(j!==undefined&&j!==null){if(a.type(j)==="string"){j=j.split("|")}a.each(h,function(e,l){if((j===true||a.inArray(e,j)!=-1)&&a.type(redux.options[e])==="object"){h[e]=a.extend(redux.options[e],h[e])}})}if(f!==undefined&&f!==null){var g=confirm(redux.args.preset_confirm);if(g){d.find('label[for="'+k+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",true);window.onbeforeunload=null;if(a("#import-code-value").length===0){a(this).append('<textarea id="import-code-value" style="display:none;" name="'+redux.args.opt_name+'[import_code]">'+JSON.stringify(h)+"</textarea>")}else{a("#import-code-value").val(JSON.stringify(h))}if(a("#publishing-action #publish").length!==0){a("#publish").click()}else{a("#redux-import").click()}}}else{}return false}else{d.find('label[for="'+k+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",true).trigger("change");redux_change(a(this).closest("label").find('input[type="radio"]'))}});d.find(".tiles").qtip({content:{text:function(f,e){return"<img src='"+a(this).attr("rel")+"' style='max-width:150px;' alt='' />"},},style:"qtip-tipsy",position:{my:"top center",at:"bottom center",}})})}})(jQuery);