(function(b){redux.field_objects=redux.field_objects||{};redux.field_objects.image_select=redux.field_objects.image_select||{};b(document).ready(function(){});redux.field_objects.image_select.init=function(a){if(!a){a=b(document).find(".redux-group-tab:visible").find(".redux-container-image_select:visible")}b(a).each(function(){var e=b(this);var f=e;if(!e.hasClass("redux-field-container")){f=e.parents(".redux-field-container:first")}if(f.is(":hidden")){return}if(f.hasClass("redux-field-init")){f.removeClass("redux-field-init")}else{return}e.find(".redux-image-select label img, .redux-image-select label .tiles").click(function(l){var c=b(this).closest("label").attr("for");b(this).parents("fieldset:first").find(".redux-image-select-selected").removeClass("redux-image-select-selected").find("input[type='radio']").attr("checked",false);b(this).closest("label").find('input[type="radio"]').prop("checked");if(b(this).closest("label").hasClass("redux-image-select-preset-"+c)){l.preventDefault();var o=b(this).closest("label").find("input");var m=o.data("presets");var d=o.data("merge");if(d!==undefined&&d!==null){if(b.type(d)==="string"){d=d.split("|")}b.each(m,function(h,g){if((d===true||b.inArray(h,d)!=-1)&&b.type(redux.options[h])==="object"){m[h]=b.extend(redux.options[h],m[h])}})}if(o!==undefined&&o!==null){var n=confirm(redux.args.preset_confirm);if(n){e.find('label[for="'+c+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",true);window.onbeforeunload=null;if(b("#import-code-value").length===0){b(this).append('<textarea id="import-code-value" style="display:none;" name="'+redux.args.opt_name+'[import_code]">'+JSON.stringify(m)+"</textarea>")}else{b("#import-code-value").val(JSON.stringify(m))}if(b("#publishing-action #publish").length!==0){b("#publish").click()}else{b("#redux-import").click()}}}else{}return false}else{e.find('label[for="'+c+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",true).trigger("change");redux_change(b(this).closest("label").find('input[type="radio"]'))}});e.find(".tiles").qtip({content:{text:function(c,d){return"<img src='"+b(this).attr("rel")+"' style='max-width:150px;' alt='' />"},},style:"qtip-tipsy",position:{my:"top center",at:"bottom center",}})})}})(jQuery);