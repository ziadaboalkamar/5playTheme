import{c as b,z as C,e as L,D as c}from"./links.96235554.js";import{l as f}from"./license.2537a586.js";import{C as M}from"./index.c885ab17.js";import{r as o,o as a,d as l,w as n,a as y,t as d,b as u,c as _,e as p,C as S,g as D}from"./vue.runtime.esm-bundler.a49acf4f.js";import{_ as m}from"./_plugin-vue_export-helper.bd508f36.js";import{B as T}from"./DatePicker.8d448f62.js";import{C as B}from"./Blur.f2dbe3c4.js";import{C as A}from"./Index.c60e4c98.js";import O from"./ContentRankings.0f25b6a4.js";import{C as J}from"./Index.86dc50d3.js";import R from"./Dashboard.b83d5689.js";import N from"./KeywordRankings.83c3acce.js";import P from"./SeoStatistics.df9050be.js";import"./default-i18n.cc9dbff0.js";import"./isArrayLikeObject.3ade28da.js";import"./upperFirst.0bd33a97.js";import"./_stringToArray.4de3b1f3.js";import"./toString.d05e92a1.js";import"./Caret.7f04b0aa.js";import"./get.80957652.js";import"./isUndefined.b85e87fb.js";import"./_getAllKeys.9b0cdc6c.js";import"./_getTag.e9f54dd1.js";import"./debounce.2685fa37.js";import"./toNumber.81917229.js";import"./isEqual.56699969.js";import"./_baseIsEqual.f4e39637.js";import"./allowed.d054e5c0.js";/* empty css             */import"./params.597cd0f5.js";/* empty css                                            *//* empty css                                              */import"./constants.c7984802.js";import"./SaveChanges.dad94bb3.js";/* empty css                                              */import"./Header.2ececb24.js";import"./addons.8f1a852a.js";import"./LicenseKeyBar.42b79cab.js";import"./LogoGear.8c7ffea6.js";import"./AnimatedNumber.63a7d070.js";import"./numbers.8fa607e7.js";import"./Logo.915b1600.js";import"./Support.55e5d0c8.js";import"./Tabs.b92dcfbe.js";import"./TruSeoScore.25c11e71.js";import"./Information.73bebac2.js";import"./Slide.f53bd663.js";import"./Date.08bca440.js";import"./Exclamation.cce5234f.js";import"./Url.7a58a648.js";import"./Gear.7e798dc4.js";import"./Row.85168b37.js";import"./PostsTable.ecbf6727.js";import"./WpTable.cbf26363.js";import"./PostTypes.9ab32454.js";import"./Statistic.d98c0aaa.js";import"./_arrayEach.56a9f647.js";import"./vue.runtime.esm-bundler.ae60c85d.js";import"./Tooltip.c031cb66.js";import"./ScoreButton.d532fab3.js";import"./Table.9ab1ff6b.js";import"./RequiredPlans.cbd60891.js";import"./Card.02715b2c.js";import"./Overview.c3cdfa6f.js";import"./DonutChartWithLegend.28fb6fbc.js";import"./KeywordsGraph.3c98a69c.js";import"./SeoStatisticsOverview.e9475981.js";import"./Portal.72ce36ea.js";import"./Index.9d3d0eb4.js";import"./SeoRevisions.fd5dbff2.js";import"./html.671743b1.js";import"./UserAvatar.374a3d02.js";import"./Profile.ec7b99d8.js";import"./Eye.5a8f97a6.js";import"./List.c38f7aab.js";import"./Statistics.1e163269.js";const V={setup(){return{optionsStore:b(),searchStatisticsStore:C()}},components:{CoreAlert:M},data(){return{error:this.$t.__("Your connection with Google Search Console has expired or is invalid. Please check that your site is verified in Google Search Console and try to reconnect. If the problem persists, please contact our support team.",this.$td)}},computed:{invalidAuthentication(){var t,s;return this.searchStatisticsStore.unverifiedSite||typeof((s=(t=this.optionsStore.internalOptions.internal)==null?void 0:t.searchStatistics)==null?void 0:s.profile)!="object"}}};function G(t,s,i,g,r,e){const h=o("core-alert");return e.invalidAuthentication?(a(),l(h,{key:0,class:"aioseo-input-error aioseo-search-statistics-authentication-alert",type:"red"},{default:n(()=>[y("strong",null,d(r.error),1)]),_:1})):u("",!0)}const U=m(V,[["render",G]]),z={};function F(t,s){return a(),_("div")}const I=m(z,[["render",F]]),E={};function H(t,s){return a(),_("div")}const j=m(E,[["render",H]]);const q={setup(){return{licenseStore:L(),searchStatisticsStore:C()}},emits:["rolling"],components:{AuthenticationAlert:U,BaseDatePicker:T,CoreBlur:B,CoreMain:A,ContentRankings:O,Cta:J,Dashboard:R,KeywordRankings:N,PostDetail:I,Settings:j,SeoStatistics:P},data(){return{maxDate:null,minDate:null,loadingConnect:!1,strings:{pageName:this.$t.__("Search Statistics",this.$td),ctaHeaderText:this.$t.__("Connect your website to Google Search Console",this.$td),ctaDescription:this.$t.__("Connect to Google Search Console to receive valuable insights on how your content is being discovered. Identify areas for improvement in order to improve search engine rankings and drive more traffic to your website.",this.$td),ctaButtonText:this.$t.__("Connect to Google Search Console",this.$td),feature1:this.$t.__("Search traffic insights",this.$td),feature2:this.$t.__("Improved visibility",this.$td),feature3:this.$t.__("Track page and keyword rankings",this.$td),feature4:this.$t.__("Speed tests for individual pages/posts",this.$td)}}},computed:{defaultRange(){const t=new Date(`${this.searchStatisticsStore.range.start} 00:00:00`),s=new Date(`${this.searchStatisticsStore.range.end} 00:00:00`);return[t,s]},excludeTabs(){const t=["post-detail"];return(this.licenseStore.isUnlicensed||!f.hasCoreFeature("search-statistics"))&&t.push("settings"),t},isSettings(){return this.$route.name==="settings"},showConnectCta(){return(f.hasCoreFeature("search-statistics")&&!this.searchStatisticsStore.isConnected||this.searchStatisticsStore.unverifiedSite)&&!this.isSettings},showDatePicker(){return!["settings","content-rankings"].includes(this.$route.name)&&this.searchStatisticsStore.isConnected&&!this.searchStatisticsStore.unverifiedSite},containerClasses(){const t=[];return this.searchStatisticsStore.fetching&&t.push("aioseo-blur"),t},getOriginalMaxDate(){return this.searchStatisticsStore.latestAvailableDate?c.fromFormat(this.searchStatisticsStore.latestAvailableDate,"yyyy-MM-dd").setZone(c.zone)||c.local().plus({days:-2}):c.local().plus({days:-2})},datepickerShortcuts(){return[{text:this.$t.__("Last 7 Days",this.$td),value:()=>(window.aioseoBus.$emit("rolling","last7Days"),[this.getOriginalMaxDate.plus({days:-6}).toJSDate(),this.getOriginalMaxDate.toJSDate()])},{text:this.$t.__("Last 28 Days",this.$td),value:()=>(window.aioseoBus.$emit("rolling","last28Days"),[this.getOriginalMaxDate.plus({days:-27}).toJSDate(),this.getOriginalMaxDate.toJSDate()])},{text:this.$t.__("Last 3 Months",this.$td),value:()=>(window.aioseoBus.$emit("rolling","last3Months"),[this.getOriginalMaxDate.plus({days:-89}).toJSDate(),this.getOriginalMaxDate.toJSDate()])}]}},methods:{isDisabledDate(t){return this.minDate===null?!0:t.getTime()<this.minDate.getTime()||t.getTime()>this.maxDate.getTime()},onDateChange(t,s){this.searchStatisticsStore.setDateRange({dateRange:t,rolling:s})},connect(){this.loadingConnect=!0,this.searchStatisticsStore.getAuthUrl().then(t=>{window.location=t})},highlightShortcut(t){if(!t)return;document.querySelectorAll(".el-picker-panel__shortcut").forEach(i=>{switch(i.innerText){case this.$t.__("Last 7 Days",this.$td):t==="last7Days"?i.classList.add("active"):i.classList.remove("active");break;case this.$t.__("Last 28 Days",this.$td):t==="last28Days"?i.classList.add("active"):i.classList.remove("active");break;case this.$t.__("Last 3 Months",this.$td):t==="last3Months"?i.classList.add("active"):i.classList.remove("active");break;case this.$t.__("Last 6 Months",this.$td):t==="last6Months"?i.classList.add("active"):i.classList.remove("active");break;default:i.classList.remove("active")}})}},mounted(){this.minDate=c.now().plus({months:-16}).toJSDate(),this.maxDate=this.getOriginalMaxDate.toJSDate()}},K={key:0,class:"connect-cta"};function Y(t,s,i,g,r,e){const h=o("base-date-picker"),v=o("authentication-alert"),x=o("core-blur"),$=o("cta"),k=o("core-main");return a(),l(k,{"page-name":r.strings.pageName,"exclude-tabs":e.excludeTabs,showTabs:!e.excludeTabs.includes(t.$route.name),containerClasses:e.containerClasses},{extra:n(()=>[e.showDatePicker?(a(),l(h,{key:0,onChange:e.onDateChange,onUpdated:s[0]||(s[0]=w=>e.highlightShortcut(w)),defaultValue:e.defaultRange,defaultRolling:g.searchStatisticsStore.rolling,isDisabledDate:e.isDisabledDate,shortcuts:e.datepickerShortcuts,size:"small"},null,8,["onChange","defaultValue","defaultRolling","isDisabledDate","shortcuts"])):u("",!0)]),default:n(()=>[y("div",null,[p(v),e.showConnectCta?(a(),_("div",K,[p(x,null,{default:n(()=>[(a(),l(S(t.$route.name)))]),_:1}),p($,{"cta-button-action":"",onCtaButtonClick:e.connect,"cta-button-loading":r.loadingConnect,"show-link":!1,"button-text":r.strings.ctaButtonText,alignTop:!0,"feature-list":[r.strings.feature1,r.strings.feature2,r.strings.feature3,r.strings.feature4]},{"header-text":n(()=>[D(d(r.strings.ctaHeaderText),1)]),description:n(()=>[D(d(r.strings.ctaDescription),1)]),_:1},8,["onCtaButtonClick","cta-button-loading","button-text","feature-list"])])):u("",!0),e.showConnectCta?u("",!0):(a(),l(S(t.$route.name),{key:1}))])]),_:1},8,["page-name","exclude-tabs","showTabs","containerClasses"])}const Se=m(q,[["render",Y]]);export{Se as default};
